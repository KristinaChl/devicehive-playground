!function(i){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?(window.isMobile=!0,document.addEventListener("DOMContentLoaded",function(){document.body.className+=" mobile"})):(window.isMobile=!1,document.body.className+=" desktop");var o={init:function(i){this.config=i,this.bindEvents()},bindEvents:function(){this.validate(this.config.form),this.enableButton(this.config.form,this.config.fields,this.config.btn)},validate:function(o){i.validator.methods.emailRegex=function(i,o){return this.optional(o)||/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/gim.test(i)},i(o).validate({rules:{email:{emailRegex:!0}},messages:{email:{emailRegex:"Please enter a valid email address."}},submitHandler:function(o){i(o).submit()}})},enableButton:function(o,n,e){for(var t=0;t<n.length;t++)i(n[t]).on("blur keyup",function(){o.valid()?e.prop("disabled",!1):e.prop("disabled",!0)})}},n={init:function(o){var n=this;this.config=o,this.bindEvents(),this.footerBar=this.config.footerBar.clone(),window.innerWidth<=992&&(n.config.navbar.hide(),i(window).on("orientationchange",function(){n.hideMenu()})),i(window).on("resize",function(){i("body").removeClass(n.config.classToBodyAdd),window.innerWidth<=992?n.config.navbar.hide():n.config.navbar.show()})},bindEvents:function(){var o=this,n=i("body");o.config.menuBtn.on("click",this.processMenu),o.config.navItem.on("click",function(){n.hasClass(o.config.classToBodyAdd)&&(i("#headerNav").slideUp(),n.removeClass(o.config.classToBodyAdd))})},processMenu:function(){var o=n;i("body").hasClass(o.config.classToBodyAdd)?o.hideMenu():o.showMenu()},hideMenu:function(){i("body").removeClass(this.config.classToBodyAdd),this.config.navbar.slideUp()},showMenu:function(){i("body").addClass(this.config.classToBodyAdd),this.config.navbar.append(this.footerBar).slideDown()}},e={init:function(i){this.config=i,this.processTabs(),this.hideTabs()},processTabs:function(){var o=e;this.config.tabs.find(this.config.tab).each(function(n,e){i(e).on("click",o.config.tabBtn,function(){i(this).hasClass("open")?(i(this).removeClass("open"),i(e).find(o.config.tabContent).slideUp()):(i(this).addClass("open"),i(e).find(o.config.tabContent).slideDown())})})},hideTabs:function(){this.config.tabs.find(this.config.tabContent).hide()}},t={init:function(i){this.config=i,this.bindEvents()},bindEvents:function(){var o=t;this.config.panel.each(function(n,e){i(e).on("click",o.config.copyBtn,function(){var n=i(e).find(t.config.textToCopy),s=i(e).find(o.config.copiedName).text();o.copyToClipboard(n),o.showMsg(s)})})},copyToClipboard:function(o){var n=i("<input>");i("body").append(n),n.val(i(o).text()).select(),document.execCommand("copy"),n.remove()},showMsg:function(i){this.config.copyMsg.text(i+"copied").addClass("copied"),setTimeout(function(){t.config.copyMsg.text("").removeClass("copied")},2e3)}},s={init:function(i){this.config=i,this.checkUser()},clearCookies:function(){Cookies.remove("connect.sid"),window.location="/logout"},getCurrentUser:function(){this.config.signIn.hide(),this.config.detailPage.show(),this.loadContent()},checkUser:function(){Cookies.get("connect.sid")?this.getCurrentUser():this.userIsMissing()},loadContent:function(){var o=this;this.config.loader.show(),i.get("info",function(i){o.config.detailPage.html(i)}).done(function(){o.config.loader.hide(),i(o.config.logoutBtn).on("click",o.clearCookies),t.init({panel:i(".hasCopy"),copyBtn:".copyBtn",copyMsg:i("#copyMsg"),textToCopy:"code",copiedName:".copy__heading"}),e.init({tabs:i("#detailsTabs"),tab:".details__tab",tabBtn:".tab__btn",tabContent:".tab__content"})}).fail(function(n){o.config.loader.hide(),o.config.relogin.show(),i(o.config.logoutBtn).on("click",o.clearCookies),n.status<404?o.config.keyExpiredMsg.show():o.config.serverErrorMsg.show()})},userIsMissing:function(){this.config.signIn.show(),this.config.detailPage.hide(),i(".mobile__logout").hide()}};i(function(){var e=i(".header");i(window).scrollTop()>100?e.addClass("mobile-header"):e.removeClass("mobile-header"),i(window).on("scroll",function(){window.innerWidth<=992&&(i(window).scrollTop()>100?e.addClass("mobile-header"):e.removeClass("mobile-header"))}),s.init({logoutBtn:"#logout",loader:i(".loading"),signIn:i("#sign-in"),detailPage:i("#playground-detail"),keyExpiredMsg:i("#key-expired"),serverErrorMsg:i("#server-error"),relogin:i("#playground-relogin")}),n.init({footerBar:i("#footerLinks"),menuBtn:i("#mobileBtn"),classToBodyAdd:"mobile-menu-visible",navbar:i("#headerNav"),navItem:i(".nav__item")}),o.init({form:i("#footerEmailForm"),btn:i("#footerSubscribeBtn"),fields:["#footer-email"]})})}(jQuery);